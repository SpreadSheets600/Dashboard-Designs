<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindBlock - Bento Quiz Dashboard</title>
    
    <!-- 1. Styling Strategy: Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Typography: Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- 3. Icons: FontAwesome (No SVG) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- 4. Visualization: Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Tailwind Config for Custom Theme -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'apple-bg': '#F5F5F7',
                        'apple-card': 'rgba(255, 255, 255, 0.7)',
                        'accent-blue': '#007AFF',
                        'accent-red': '#FF3B30',
                        'accent-orange': '#FF9500',
                        'accent-green': '#34C759',
                    },
                    boxShadow: {
                        'soft': '0 4px 24px -1px rgba(0, 0, 0, 0.05)',
                        'glow': '0 0 20px rgba(0, 122, 255, 0.3)',
                    },
                    backdropBlur: {
                        'xs': '2px',
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Utilities */
        body {
            background-color: #F5F5F7;
            color: #1d1d1f;
        }

        /* Hide Scrollbar for Timeline */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }

        /* Bento Tile Base Style */
        .bento-tile {
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.3s ease;
        }
        
        .bento-tile:hover {
            transform: scale(1.01);
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.1);
        }

        /* Animation for Modal */
        .modal-enter {
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Pulse Animation for Resume Button */
        @keyframes subtle-pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 122, 255, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(0, 122, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 122, 255, 0); }
        }
        .pulse-ring {
            animation: subtle-pulse 2s infinite;
        }

        /* Chart Container Strict Styling */
        .chart-container {
            position: relative;
            width: 100%;
            height: 250px;
            max-height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body class="antialiased min-h-screen p-4 md:p-8 selection:bg-accent-blue selection:text-white">

    <!-- Application Structure Plan:
         Based on the 'Organized Chaos' and 'Apple-esque' philosophy.
         1. Header: Minimalist welcome.
         2. Main Grid: 12-column asymmetric grid.
            - Left Main (8 cols): Hero (Top), Split + Trophy (Bottom).
            - Right Pillar (4 cols): Spans full height of Left Main elements.
            - Bottom (12 cols): Timeline.
         3. Modal layer: For interaction flows (Review Mistakes).
    -->

    <div class="max-w-[1280px] mx-auto">
        
        <!-- Header -->
        <header class="mb-8 flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold tracking-tight text-gray-900">MindBlock</h1>
                <p class="text-sm text-gray-500 font-medium mt-1">Interactive Learning Dashboard</p>
            </div>
            <div class="flex items-center gap-4">
                <button class="w-10 h-10 rounded-full bg-white shadow-sm flex items-center justify-center text-gray-500 hover:text-accent-blue transition-colors">
                    <i class="fa-regular fa-bell"></i>
                </button>
                <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-blue-100 to-blue-50 border-2 border-white shadow-sm flex items-center justify-center font-bold text-accent-blue" id="user-avatar">
                    AL
                </div>
            </div>
        </header>

        <!-- Main Bento Grid -->
        <main class="grid grid-cols-1 md:grid-cols-4 lg:grid-cols-12 gap-6 auto-rows-min">
            
            <!-- 
               SECTION 1: THE HERO (Context & Action)
               Goal: Immediate context and primary CTA.
               Behavior: Spans 8 cols on desktop.
            -->
            <section id="hero-tile" class="bento-tile rounded-3xl p-8 lg:col-span-8 md:col-span-4 relative overflow-hidden group">
                <!-- Introductory Context -->
                <div class="absolute top-0 right-0 p-4 opacity-50 group-hover:opacity-100 transition-opacity">
                    <i class="fa-solid fa-bolt text-yellow-400 text-6xl opacity-10 transform rotate-12"></i>
                </div>
                
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center h-full relative z-10">
                    <div class="space-y-4 max-w-lg">
                        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/50 border border-white/60 text-xs font-semibold text-gray-600 backdrop-blur-sm">
                            <i class="fa-solid fa-fire text-accent-orange"></i> 
                            <span id="streak-display">Loading Streak...</span>
                        </div>
                        
                        <h2 class="text-4xl md:text-5xl font-extrabold tracking-tight text-gray-800">
                            Ready to resume, <br><span class="text-accent-blue" id="user-name">User</span>?
                        </h2>
                        
                        <p class="text-gray-500 text-lg leading-relaxed">
                            You are <strong class="text-gray-800">85%</strong> through Level 14. 
                            Completing this session unlocks <span class="text-accent-blue font-medium">System Design II</span>.
                        </p>

                        <div class="pt-4">
                            <button onclick="handleResume()" class="pulse-ring bg-gray-900 hover:bg-black text-white px-8 py-4 rounded-2xl font-semibold text-lg transition-all transform hover:-translate-y-1 shadow-lg flex items-center gap-3">
                                <i class="fa-solid fa-play"></i> Resume Quiz
                            </button>
                        </div>
                    </div>

                    <!-- Progress Ring (CSS Only) -->
                    <div class="hidden md:flex flex-col items-center justify-center mt-6 md:mt-0 relative">
                        <!-- Background Circle -->
                        <div class="w-32 h-32 rounded-full border-8 border-gray-200"></div>
                        <!-- Simple visual representation of progress using clip-path/conic-gradient -->
                        <div class="absolute w-32 h-32 rounded-full border-8 border-accent-blue" 
                             style="clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); transform: rotate(-45deg); border-right-color: transparent; border-bottom-color: transparent;"></div>
                        <div class="absolute flex flex-col items-center">
                            <span class="text-3xl font-bold text-gray-800">14</span>
                            <span class="text-xs uppercase tracking-wider text-gray-400 font-bold">Level</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 
               SECTION 2: THE PILLAR (Analytics)
               Goal: Deep dive data.
               Behavior: Spans 4 cols, 2 rows height (tall).
               Visualization: Radar Chart to compare User vs Global stats.
            -->
            <section class="bento-tile rounded-3xl p-6 lg:col-span-4 md:col-span-4 lg:row-span-2 flex flex-col justify-between">
                <div>
                    <div class="mb-4 border-b border-gray-200 pb-4">
                        <h3 class="text-sm font-bold uppercase tracking-widest text-gray-400">Performance Analytics</h3>
                        <p class="text-xs text-gray-500 mt-1">Comparing your metrics against the global top 5%.</p>
                    </div>

                    <!-- Key Metrics Text -->
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-white/50 p-4 rounded-2xl">
                            <div class="text-3xl font-bold text-gray-800" id="accuracy-display">--%</div>
                            <div class="text-xs font-medium text-gray-500">Accuracy</div>
                        </div>
                        <div class="bg-white/50 p-4 rounded-2xl">
                            <div class="text-3xl font-bold text-gray-800" id="avg-time-display">--s</div>
                            <div class="text-xs font-medium text-gray-500">Avg Time</div>
                        </div>
                    </div>

                    <!-- Visualization: Radar Chart -->
                    <!-- Container Constraint: strict height/width -->
                    <div class="chart-container mx-auto">
                        <canvas id="performanceChart"></canvas>
                    </div>
                </div>

                <div class="mt-4 bg-blue-50/50 p-4 rounded-2xl border border-blue-100">
                    <div class="flex items-start gap-3">
                        <div class="bg-blue-100 text-accent-blue rounded-lg p-2 mt-1">
                            <i class="fa-solid fa-chart-line"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-800 text-sm">Insight</h4>
                            <p class="text-xs text-gray-600 leading-relaxed mt-1">
                                Your speed is <span class="text-accent-green font-bold">12% faster</span> than average, but accuracy drops on "System Design" questions.
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 
               SECTION 3: THE SPLIT (Remediation)
               Goal: Actionable items (Mistakes/Bookmarks).
               Behavior: Spans 4 cols (Desktop) to match visual balance with Trophies.
            -->
            <section class="bento-tile rounded-3xl lg:col-span-4 md:col-span-2 flex overflow-hidden">
                <!-- Left: Mistakes -->
                <div class="w-1/2 p-6 bg-red-50/30 hover:bg-red-50/80 transition-colors cursor-pointer border-r border-gray-200 group relative" onclick="openReviewModal()">
                    <div class="absolute top-4 right-4 w-2 h-2 rounded-full bg-accent-red animate-pulse"></div>
                    <div class="h-full flex flex-col justify-center items-center text-center">
                        <div class="w-12 h-12 rounded-full bg-white shadow-sm flex items-center justify-center text-accent-red text-xl mb-3 group-hover:scale-110 transition-transform">
                            <i class="fa-solid fa-rotate-left"></i>
                        </div>
                        <span class="text-3xl font-black text-gray-800" id="mistakes-count">0</span>
                        <span class="text-xs font-bold text-gray-400 uppercase tracking-wide mt-1">Mistakes</span>
                        <span class="text-xs text-accent-red font-semibold mt-2 opacity-0 group-hover:opacity-100 transition-opacity">Review Now &rarr;</span>
                    </div>
                </div>

                <!-- Right: Bookmarks -->
                <div class="w-1/2 p-6 hover:bg-white/80 transition-colors cursor-pointer group">
                    <div class="h-full flex flex-col justify-center items-center text-center">
                        <div class="w-12 h-12 rounded-full bg-white shadow-sm flex items-center justify-center text-accent-blue text-xl mb-3 group-hover:scale-110 transition-transform">
                            <i class="fa-solid fa-bookmark"></i>
                        </div>
                        <span class="text-3xl font-black text-gray-800" id="bookmarks-count">0</span>
                        <span class="text-xs font-bold text-gray-400 uppercase tracking-wide mt-1">Saved</span>
                    </div>
                </div>
            </section>

            <!-- 
               SECTION 4: TROPHY CASE (Gamification)
               Goal: Reward and Motivation.
               Behavior: Spans 4 cols.
            -->
            <section class="bento-tile rounded-3xl p-6 lg:col-span-4 md:col-span-2">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-sm font-bold uppercase tracking-widest text-gray-400">Achievements</h3>
                    <button class="text-xs font-bold text-accent-blue hover:underline">View All</button>
                </div>
                
                <div class="grid grid-cols-2 gap-3 h-40" id="achievements-grid">
                    <!-- Populated via JS -->
                </div>
            </section>

            <!-- 
               SECTION 5: TIMELINE (Journey)
               Goal: Historical context and future path.
               Behavior: Spans full width (12 cols).
            -->
            <section class="bento-tile rounded-3xl p-6 lg:col-span-12 md:col-span-4">
                <div class="flex items-center gap-3 mb-4">
                    <div class="p-2 bg-gray-100 rounded-lg">
                        <i class="fa-solid fa-road text-gray-600"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-gray-800">Your Learning Journey</h3>
                        <p class="text-xs text-gray-500">Scroll to see past quizzes and upcoming milestones.</p>
                    </div>
                </div>

                <!-- Horizontal Scroll Container -->
                <div class="flex gap-4 overflow-x-auto no-scrollbar py-2" id="timeline-container">
                    <!-- Timeline Cards Populated via JS -->
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="mt-12 mb-6 text-center">
            <p class="text-xs text-gray-400 font-medium">MindBlock &copy; 2025. Designed with strict adherence to spec.</p>
        </footer>
    </div>

    <!-- 
       INTERACTION LAYER: MODAL
       Scenario B: Remediation. Slides up to show mistakes.
    -->
    <div id="review-modal" class="fixed inset-0 z-50 hidden" aria-hidden="true">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-gray-900/40 backdrop-blur-sm transition-opacity" onclick="closeReviewModal()"></div>
        
        <!-- Modal Content -->
        <div class="absolute bottom-0 left-0 right-0 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[600px] md:h-auto h-[80vh] bg-white rounded-t-3xl md:rounded-3xl shadow-2xl transform transition-transform duration-300 translate-y-full flex flex-col" id="modal-panel">
            
            <div class="p-6 border-b border-gray-100 flex justify-between items-center bg-white rounded-t-3xl z-10">
                <div>
                    <h3 class="text-xl font-bold text-gray-900">Review Mistakes</h3>
                    <p class="text-sm text-gray-500">24 questions identified for review.</p>
                </div>
                <button onclick="closeReviewModal()" class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 hover:bg-gray-200">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            
            <div class="flex-1 overflow-y-auto p-6 bg-gray-50" id="modal-list">
                <!-- Example Mistake Item -->
                <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 mb-4">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs font-bold text-accent-red bg-red-50 px-2 py-1 rounded">React Hooks</span>
                        <span class="text-xs text-gray-400">Quiz #101</span>
                    </div>
                    <p class="font-medium text-gray-800 mb-3">Which Hook is used to perform side effects in function components?</p>
                    <div class="text-sm p-3 bg-red-50 rounded-lg text-red-700 border border-red-100 mb-2">
                        <i class="fa-solid fa-xmark mr-2"></i> Your Answer: useState
                    </div>
                    <div class="text-sm p-3 bg-green-50 rounded-lg text-green-700 border border-green-100">
                        <i class="fa-solid fa-check mr-2"></i> Correct Answer: useEffect
                    </div>
                </div>
                
                <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 mb-4">
                     <div class="flex justify-between items-start mb-2">
                        <span class="text-xs font-bold text-accent-red bg-red-50 px-2 py-1 rounded">CSS Grid</span>
                        <span class="text-xs text-gray-400">Quiz #102</span>
                    </div>
                    <p class="font-medium text-gray-800 mb-3">What is the default value of grid-auto-flow?</p>
                    <div class="text-sm p-3 bg-red-50 rounded-lg text-red-700 border border-red-100 mb-2">
                        <i class="fa-solid fa-xmark mr-2"></i> Your Answer: column
                    </div>
                    <div class="text-sm p-3 bg-green-50 rounded-lg text-green-700 border border-green-100">
                        <i class="fa-solid fa-check mr-2"></i> Correct Answer: row
                    </div>
                </div>
            </div>
            
            <div class="p-6 border-t border-gray-100 bg-white rounded-b-3xl">
                <button class="w-full py-3 bg-accent-blue text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors shadow-lg shadow-blue-200">
                    Start Review Session
                </button>
            </div>
        </div>
    </div>

    <!-- Logic Layer -->
    <script>
        // <!-- Chosen Palette: Warm Neutrals + Apple UI Colors (Blue/Red/Orange/Green) -->
        
        // Data Store (Based on JSON Model in Spec)
        const appData = {
            user: {
                id: "u_992",
                name: "Alex",
                level: 14,
                xp: 3400,
                xpToNext: 5000
            },
            stats: {
                accuracy: 87,
                streak: 12,
                avgTime: "45s",
                globalRank: "Top 5%"
            },
            activity: {
                mistakesCount: 24,
                bookmarksCount: 8,
                timeline: [
                    { id: 100, status: "completed", score: 92, topic: "JS Fundamentals", date: "Oct 10" },
                    { id: 101, status: "completed", score: 85, topic: "React Hooks", date: "Oct 12" },
                    { id: 102, status: "completed", score: 100, topic: "CSS Grid", date: "Oct 15" },
                    { id: 103, status: "locked", topic: "System Design", date: "Today" },
                    { id: 104, status: "locked", topic: "Adv. Patterns", date: "Upcoming" },
                    { id: 105, status: "locked", topic: "Security", date: "Upcoming" }
                ]
            },
            achievements: [
                { icon: "fa-bolt", name: "Speed Demon", color: "text-yellow-500 bg-yellow-50" },
                { icon: "fa-book-open", name: "Bookworm", color: "text-blue-500 bg-blue-50" },
                { icon: "fa-bullseye", name: "Sharpshooter", color: "text-red-500 bg-red-50" },
                { icon: "fa-crown", name: "Ruler", color: "text-purple-500 bg-purple-50" }
            ]
        };

        // Initialization
        document.addEventListener('DOMContentLoaded', () => {
            renderDashboard();
            initChart();
        });

        // --- Render Functions ---

        function renderDashboard() {
            // Hero
            document.getElementById('user-name').textContent = appData.user.name;
            document.getElementById('streak-display').textContent = `${appData.stats.streak} Day Streak`;
            
            // Stats
            document.getElementById('accuracy-display').textContent = `${appData.stats.accuracy}%`;
            document.getElementById('avg-time-display').textContent = appData.stats.avgTime;

            // Split
            document.getElementById('mistakes-count').textContent = appData.activity.mistakesCount;
            document.getElementById('bookmarks-count').textContent = appData.activity.bookmarksCount;

            // Achievements
            const achGrid = document.getElementById('achievements-grid');
            appData.achievements.forEach(ach => {
                const el = document.createElement('div');
                el.className = `flex items-center gap-3 p-3 rounded-2xl border border-gray-100 hover:border-gray-200 bg-white/50 transition-colors`;
                el.innerHTML = `
                    <div
